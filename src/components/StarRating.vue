<template>
    <div class="star-rating">
        <div v-for="n in maxStars" :key="n" class="star" :class="[disabled ? 'cursor-default' : 'cursor-pointer']"
            @click="rate(n)" v-html="n <= rating ? ratedStarSVG : unratedStarSVG"
            :style="{ width: starSize, height: starSize }"></div>
    </div>
</template>

<script>
export default {
    name: "StarRating",
    props: {
        disabled: {
            type: Boolean,
            default: true
        },
        modelValue: {
            type: Number,
            default: 0,
            validator: (value) => value >= 0 && value <= 5,
        },
        size: {
            type: String,
            default: "md", // Possible values: 'sm', 'md', 'lg'
            validator: (value) => ["sm", "md", "lg"].includes(value),
        },
    },
    data() {
        return {
            rating: this.modelValue,
            maxStars: 5,
            unratedStarSVG: `
         <svg width="100%" height="100%" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.4245 7.94042L7.78887 9.43817C8.09112 9.62942 8.46612 9.34479 8.3765 8.99192L7.69362 6.30504C7.67433 6.2302 7.67656 6.15143 7.70004 6.0778C7.72352 6.00416 7.76731 5.93865 7.82637 5.88879L9.94662 4.12442C10.2249 3.89267 10.0816 3.43029 9.72349 3.40704L6.95487 3.22704C6.88033 3.22175 6.80882 3.1954 6.74867 3.15106C6.68853 3.10671 6.64221 3.04619 6.61512 2.97654L5.58237 0.376293C5.55425 0.302395 5.50433 0.23879 5.43923 0.193911C5.37414 0.149033 5.29694 0.125 5.21787 0.125C5.1388 0.125 5.0616 0.149033 4.99651 0.193911C4.93141 0.23879 4.88149 0.302395 4.85337 0.376293L3.82062 2.97654C3.79359 3.04626 3.7473 3.10686 3.68714 3.15127C3.62699 3.19569 3.55546 3.2221 3.48087 3.22742L0.712246 3.40742C0.354496 3.43029 0.210496 3.89267 0.489121 4.12442L2.60937 5.88917C2.66836 5.93899 2.71211 6.00444 2.73559 6.078C2.75907 6.15156 2.76133 6.23025 2.74212 6.30504L2.10912 8.79692C2.0015 9.22029 2.45187 9.56192 2.81412 9.33204L5.01162 7.94042C5.07338 7.90115 5.14506 7.8803 5.21825 7.8803C5.29143 7.8803 5.36311 7.90115 5.42487 7.94042H5.4245Z" fill="#CCCCCC"/>
</svg>
`,
            ratedStarSVG: `
         <svg width="100%" height="100%" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.4245 7.94042L7.78887 9.43817C8.09112 9.62942 8.46612 9.34479 8.3765 8.99192L7.69362 6.30504C7.67433 6.2302 7.67656 6.15143 7.70004 6.0778C7.72352 6.00416 7.76731 5.93865 7.82637 5.88879L9.94662 4.12442C10.2249 3.89267 10.0816 3.43029 9.72349 3.40704L6.95487 3.22704C6.88033 3.22175 6.80882 3.1954 6.74867 3.15106C6.68853 3.10671 6.64221 3.04619 6.61512 2.97654L5.58237 0.376293C5.55425 0.302395 5.50433 0.23879 5.43923 0.193911C5.37414 0.149033 5.29694 0.125 5.21787 0.125C5.1388 0.125 5.0616 0.149033 4.99651 0.193911C4.93141 0.23879 4.88149 0.302395 4.85337 0.376293L3.82062 2.97654C3.79359 3.04626 3.7473 3.10686 3.68714 3.15127C3.62699 3.19569 3.55546 3.2221 3.48087 3.22742L0.712246 3.40742C0.354496 3.43029 0.210496 3.89267 0.489121 4.12442L2.60937 5.88917C2.66836 5.93899 2.71211 6.00444 2.73559 6.078C2.75907 6.15156 2.76133 6.23025 2.74212 6.30504L2.10912 8.79692C2.0015 9.22029 2.45187 9.56192 2.81412 9.33204L5.01162 7.94042C5.07338 7.90115 5.14506 7.8803 5.21825 7.8803C5.29143 7.8803 5.36311 7.90115 5.42487 7.94042H5.4245Z" fill="#FF8A00"/>
</svg>
`,
        };
    },
    computed: {
        starSize() {
            switch (this.size) {
                case 'sm':
                    return '14px';
                case 'md':
                    return '18px';
                case 'lg':
                    return '24px';
                default:
                    return '18px';
            }
        }
    },
    methods: {
        rate(stars) {
            if (!this.disabled)
                this.rating = stars;
            this.$emit("update:modelValue", this.rating);
        },
    },
    watch: {
        modelValue(newValue) {
            this.rating = newValue;
        },
    },
};
</script>



<style scoped>
.star-rating {
    display: flex;
    gap: 1px;
}

.star {

    width: 18.219px;
    height: 18.219px;
}
</style>